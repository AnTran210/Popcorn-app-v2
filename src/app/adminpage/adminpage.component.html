<main>
    <section class="create">
        <form [formGroup]="movieForm" (ngSubmit)="onSubmit()">
            <div class="form-section">
                <h2>Thông tin Phim</h2>
                <div class="form-group">
                    <label for="id">ID Phim:</label>
                    <input type="text" id="id" formControlName="id" class="form-control">
                </div>

                <div class="form-group">
                    <label for="title">Tiêu đề:</label>
                    <input type="text" id="title" formControlName="title" class="form-control">
                </div>

                <div class="form-group">
                    <label for="type">Thể loại:</label>
                    <input type="text" id="type" formControlName="type" class="form-control">
                </div>

                <div class="form-group">
                    <label for="poster">Tải lên Poster:</label>
                    <input type="file" id="poster" (change)="onFileChange($event, 'poster')" class="form-control">
                </div>

                <div class="form-group">
                    <label for="background">Tải lên Ảnh nền:</label>
                    <input type="file" id="background" (change)="onFileChange($event, 'background')"
                        class="form-control">
                </div>
            </div>

            <hr>

            <div class="form-section" formArrayName="genres">
                <h2>Thể loại (Genres)</h2>
                <div *ngFor="let genre of genres.controls; let i = index" class="form-group">
                    <label for="genre-{{i}}">Thể loại {{i + 1}}:</label>
                    <input type="text" id="genre-{{i}}" [formControlName]="i" class="form-control">
                    <button type="button" (click)="removeGenre(i)" class="btn btn-danger">Xóa</button>
                </div>
                <button type="button" (click)="addGenre()" class="btn btn-primary">Thêm thể loại</button>
            </div>

            <hr>

            <div class="form-section" formArrayName="sources">
                <h2>Nguồn phim (Sources)</h2>
                <div *ngFor="let source of sources.controls; let i = index" class="form-group" [formGroupName]="i">
                    <label for="episode-{{i}}">Tập:</label>
                    <input type="number" id="episode-{{i}}" formControlName="episode" class="form-control">

                    <label for="url-{{i}}">URL:</label>
                    <input type="text" id="url-{{i}}" formControlName="url" class="form-control">

                    <button type="button" (click)="removeSource(i)" class="btn btn-danger">Xóa</button>
                </div>
                <button type="button" (click)="addSource()" class="btn btn-primary">Thêm nguồn phim</button>
            </div>

            <hr>

            <button type="submit" [disabled]="movieForm.invalid" class="btn btn-success">Lưu phim</button>
        </form>
    </section>
</main>